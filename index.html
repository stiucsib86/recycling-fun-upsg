<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Recycle IT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 20px;
        padding-bottom: 40px;
      }

      /* Custom container */
      .container-narrow {
        margin: 0 auto;
        max-width: 700px;
      }
      .container-narrow > hr {
        margin: 30px 0;
      }
    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="ico/favicon.png">
  </head>

  <body>
    <script id="leaderboard" type="text/html">
      <table class="table table-hover">
      <tr>
      <th>#</th>
      <th>Region</th>
      <th style="width:120px">Recycling contribution per person <span>(kg/people)</span> </th>
      <th>Recycling rate <span>(%)</span></th>
      <th>Waste Total (kg)</th>
      <th>Difference to previous month <span>(kg)</span></th>
      <th>Badge</th>
      </tr>
      <tbody>
      {{#data}}
      {{>items}}
      {{/data}}
      </tbody>
      </table>
    </script>

    <script id="items" type="text/html" class="partial">
      <tr>
      <td>{{id}}</td>
      <td><a href="#" class="showChart">{{player}}</a></td>
      <td>{{average_per_house}}</td>
      <td>
        <div class="progress progress-striped active">
          <div class="bar" style="width: {{recycle_percentage}}%;"></div>
        </div>
      </td>
      <td>{{wastetotal}}</td>
      <td> 
      {{#inc}}<i class="icon-arrow-up"></i>{{/inc}} 
      {{#dec}}<i class="icon-arrow-down"></i>{{/dec}} 
      {{difference}}</td>
      
      <td style="width:75px">
          {{#badge1}}<img src="img/badge1.jpg" height=25 width=25 >{{/badge1}}
          {{#badge2}}<img src="img/badge2.jpg" height=25 width=25 >{{/badge2}}
          {{#badge3}}<img src="img/badge3.jpg" height=25 width=25 >{{/badge3}}
      </td>
          
      </tr>
    </script>

    <div class="container-narrow">

      <div class="masthead">

        <ul class="nav nav-pills pull-right">
          <li class="active"><a href="#">Leaderboard</a></li>
          <li><a href="search/#/">Search Bin</a></li>
          <li><a href="search/#/user">User Profile</a></li>
        </ul>

        <h1 >Recycle IT</h1>

        <hr>

        <h2>Recycling Champion</h2>
        
        <div class="row-fluid marketing">
          <div class="span12">

            <div class="bs-docs-example">
              <ul id="myTab" class="nav nav-tabs">
                <li class="active"><a href="#r_all" data-toggle="tab">All</a></li>
                <li class=""><a href="#r_paper" data-toggle="tab">Paper</a></li>
                <li class=""><a href="#r_can" data-toggle="tab">Can</a></li>
                <li class=""><a href="#r_glass" data-toggle="tab">Glass</a></li>
                <li class=""><a href="#r_plastic" data-toggle="tab">Plastic</a></li>
                <li class=""><a href="#r_cloth" data-toggle="tab">Cloth</a></li>
                <li class=""><a href="#r_garden" data-toggle="tab">Garden</a></li>
                <li class=""><a href="#r_misc" data-toggle="tab">misc</a></li>
              </ul>
              <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade active in" id="r_all">
                  <div id="leaderboard_all"></div>
                </div>
                <div class="tab-pane fade" id="r_paper">
                  <div id="leaderboard_paper"></div>
                </div>
                <div class="tab-pane fade" id="r_can">
                  <div id="leaderboard_can"></div>
                </div>
                <div class="tab-pane fade" id="r_glass">
                  <div id="leaderboard_glass"></div>
                </div>
                <div class="tab-pane fade" id="r_plastic">
                  <div id="leaderboard_plastic"></div>
                </div>
                <div class="tab-pane fade" id="r_cloth">
                  <div id="leaderboard_cloth"></div>
                </div>
                <div class="tab-pane fade" id="r_garden">
                  <div id="leaderboard_garden"></div>
                </div>
                <div class="tab-pane fade" id="r_misc">
                  <div id="leaderboard_misc"></div>
                </div>
              </div>
            </div>
            
          </div>
        </div>

        <hr>
        
        <div id="chart_data" class="row-fluid marketing">
           <div class="span12">
            <div id="visualization" class="span8" style="display:none" ></div>
            <div id="pie_id" class="span4" style="display:none"></div>
            <img id="recycling_map" src="img/recycling_map.jpg" alt="">
          </div>
        </div>

        <hr>

        <div class="footer">
          <p>&copy; RecycleFun 2013</p>
        </div>

      </div> 
    </div>
    <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="js/jquery-latest.min.js"  type="text/javascript"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/ICanHaz.js"></script>
    <script src="js/main.js"></script>
    
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
    var visualization;
    var visualization2;

    function drawVisualization() {
      var query = new google.visualization.Query(
          'https://spreadsheets.google.com/tq?key=0Ap3K3Evv9lLsdGdtTGpWTXZtS1NMS2dPaURIV2tLekE&pub=1');
     
      // Apply query language.
      query.setQuery("SELECT E,F,G,H,I,J,M,L WHERE B = 'Clementi' ORDER BY M");
  
      // Send the query with a callback function.
      query.send(handleQueryResponse);
    }
    
    function handleQueryResponse(response) {
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
    
      var dataTable = response.getDataTable();
      
      //construct view for 2 different charts
      var dataView_bar = new google.visualization.DataView(dataTable);
      dataView_bar.setColumns([6, 7]);
            
      visualization = new google.visualization.BarChart(document.getElementById('visualization'));
      // Set chart options
      var options = {'title':'Clementi Recycle over times (kg)',
                       'width':400,
                       'height':266,
      };             
      visualization.draw(dataView_bar, options);
      
      var pie_chart = new google.visualization.PieChart(document.getElementById('pie_id'));
      
       var data = new google.visualization.DataTable();
        data.addColumn('string', 'Category');
        data.addColumn('number', 'Kg');
        data.addRows([
          ['Paper', 117350],
          ['Can', 13522],
          ['Glass', 36548],
          ['Plastic', 35094],
          ['Cloth', 3401],
          ['Miscellaneous', 5133]
        ]);
        
      // Set chart options
      var options_pie = {'title':'Clementi Recycle Category',
                       'width':200,
                       'height':300,
                       is3D:true,
      };
                       
      pie_chart.draw(data, options_pie);
    }
    /****************/
    
    google.setOnLoadCallback(drawVisualization);
    </script>

  </body>
</html>
